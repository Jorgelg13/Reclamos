<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Egresos Hospitalarios</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Encuesta para egresos de centros hospitalarios" />
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" type="text/css" href="css/demo.css" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <link rel="stylesheet" type="text/css" href="css/custom.css" />
    <script type="text/javascript" src="js/modernizr.custom.79639.js"></script>
</head>

<body>
    <div class="container demo-1">
        <div id="slider" class="sl-slider-wrapper">
            <div class="sl-slider">
                <div class="sl-slide bg-1" data-orientation="horizontal" data-slice1-rotation="-25"
                    data-slice2-rotation="-25" data-slice1-scale="2" data-slice2-scale="2">
                    <div class="sl-slide-inner">
                        <h2>Para nosotros es importante su satisfacción, por lo que solicitamos pueda completar la
                            siguiente encuesta.</h2>
                        <blockquote>
                            <p>Lideres a nivel Centro Americano en corredores de seguros</p><cite>Unity
                                Promotores</cite>
                        </blockquote>
                        <button type="submit" class="centrar-boton2" id="Siguiente">Siguiente</button>
                    </div>
                </div>
                <div class="sl-slide bg-2" data-orientation="horizontal" data-slice1-rotation="-25"
                    data-slice2-rotation="-25" data-slice1-scale="2" data-slice2-scale="2">
                    <div class="sl-slide-inner">
                        <h2 class="alto2">¿Nombre del Hospital que brindó el servicio?</h2>
                        <input type="text" id="txtNombre" class="centrar-text" name="texthospital"
                            placeholder="Nombre asegurado" style="bottom: 100% !important;"></input>
                        <input type="text" id="txtHospital" class="centrar-text2" name="texthospital"
                            placeholder="Hospital"></input>
                        <blockquote>
                            <p>Lideres a nivel Centro Americano en corredores de seguros</p><cite>Unity
                                Promotores</cite>
                        </blockquote>
                        <button type="submit" class="centrar-boton2" id="Siguiente2">Siguiente</button>
                    </div>
                </div>
                <div class="sl-slide bg-3" data-orientation="horizontal" data-slice1-rotation="3"
                    data-slice2-rotation="3" data-slice1-scale="2" data-slice2-scale="1">
                    <div class="sl-slide-inner">
                        <h2>¿Cuál sería su satisfacción en el servicio recibido por el hospital?</h2>
                        <blockquote>
                            <p>Lideres a nivel Centro Americano en corredores de seguros</p><cite>Unity
                                Promotores</cite>
                        </blockquote>
                        <select id="s1" class="centrar-listado">
                            <option value="">Seleccionar Opcion</option>
                            <option value="Mala">Mala</option>
                            <option value="Buena">Buena</option>
                            <option value="Muy Buena">Muy Buena</option>
                        </select>
                    </div>
                </div>
                <div class="sl-slide bg-4" data-orientation="vertical" data-slice1-rotation="-5"
                    data-slice2-rotation="25" data-slice1-scale="2" data-slice2-scale="1">
                    <div class="sl-slide-inner">
                        <h2 class="alto">¿Puede indicar el tiempo que demoró el trámite de egreso?</h2>
                        <select id="s2" class="centrar-listado">
                            <option value="">Seleccionar Opcion</option>
                            <option value="Menos de 1 hora">Menos de 1 hora</option>
                            <option value="2 horas">2 horas</option>
                            <option value="Mas de 3 horas">Mas de 3 horas</option>
                        </select>
                        <blockquote>
                            <p>Lideres a nivel Centro Americano en corredores de seguros</p><cite>Unity
                                Promotores</cite>
                        </blockquote>
                    </div>
                </div>
                <div class="sl-slide bg-5" data-orientation="vertical" data-slice1-rotation="-5"
                    data-slice2-rotation="25" data-slice1-scale="2" data-slice2-scale="1">
                    <div class="sl-slide-inner">
                        <h2 class="alto2">Si desea dejenos sus comentarios..</h2>
                        <textarea id="txtComentario" class="centrar-text3" name="textarea" rows="5" cols="20"
                            placeholder="Dejenos sus comentarios"></textarea>
                        <blockquote>
                            <p>Lideres a nivel Centro Americano en corredores de seguros</p><cite>Unity
                                Promotores</cite>
                        </blockquote>
                        <button type="submit" class="centrar-boton3 envio" id="enviar">Enviar</button>
                    </div>
                </div>
                <div class="sl-slide bg-6" data-orientation="vertical" data-slice1-rotation="10"
                    data-slice2-rotation="-15" data-slice1-scale="1.5" data-slice2-scale="1.5">
                    <div class="sl-slide-inner">
                        <h2>Gracias por responder a la encuesta</h2>
                        <blockquote>
                            <p>Lideres a nivel Centro Americano en corredores de seguros</p><cite>Unity
                                Promotores</cite>
                        </blockquote>
                        <button type="submit" class="centrar-boton nueva-encuesta">Nueva</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="js/jquery.ba-cond.min.js"></script>
    <script type="text/javascript" src="js/jquery.slitslider.js"></script>
    <script type="text/javascript">
        var tabla = 'encuesta-egresos';
        var hospital = '';
        var pregunta1 = '';
        var pregunta2 = '';
        var comentarios = '';

        $(function () {
            var Page = (function () {
                var $navArrows = $('#nav-arrows'),
                    $nav = $('#nav-dots > span'),
                    slitslider = $('#slider').slitslider({
                        onBeforeChange: function (slide, pos) {
                            $nav.removeClass('nav-dot-current');
                            $nav.eq(pos).addClass('nav-dot-current');
                        }
                    }),

                    init = function () {
                        initEvents();
                    },
                    initEvents = function () {
                        $navArrows.children(':last').on('click', function () {
                            slitslider.next();
                            return false;
                        });

                        $navArrows.children(':first').on('click', function () {
                            slitslider.previous();
                            return false;
                        });

                        //------------------------------  funciones para cambiar a la pregunta 2 ------------------------------------------------

                        $('#Siguiente').click(function () {
                            var $dot = $(this);
                            if (!slitslider.isActive()) {
                                $nav.removeClass('nav-dot-current');
                                $dot.addClass('nav-dot-current');
                            }
                            slitslider.jump(2);
                            return false;
                        });

                        $('#Siguiente2').click(function () {
                            hospital = $('#txtHospital').val();
                            var $dot = $(this);
                            if (!slitslider.isActive()) {
                                $nav.removeClass('nav-dot-current');
                                $dot.addClass('nav-dot-current');
                            }
                            slitslider.jump(3);
                            return false;
                        });

                        $('#s1').change(function () {
                            pregunta1 = $('#s1 option:selected').text();
                            clasificacion1 = $('#s2').val();
                            slitslider.jump(4);
                            return false;
                        });

                        $('#s2').change(function () {
                            pregunta2 = $('#s2 option:selected').text();
                            clasificacion1 = $('#s2').val();
                            slitslider.jump(5);
                            return false;
                        });

                        $('.envio').on('click', function (event) {
                            var $dot = $(this);
                            if (!slitslider.isActive()) {
                                $nav.removeClass('nav-dot-current');
                                $dot.addClass('nav-dot-current');
                            }
                            slitslider.jump(6);
                            return false;
                        });

                        $('.nueva-encuesta').on('click', function (event) {
                            window.location.reload();
                        });
                        //------------------------------------------------------------------------------------

                        $nav.each(function (i) {
                            $(this).on('click', function (event) {
                                var $dot = $(this);
                                if (!slitslider.isActive()) {
                                    $nav.removeClass('nav-dot-current');
                                    $dot.addClass('nav-dot-current');
                                }
                                slitslider.jump(i + 1);
                                return false;
                            });
                        });
                    };
                return { init: init };
            })();
            Page.init();
        });

        $("#enviar").click(function () {
            $.post("/api/v1/encuesta/guardar",
                {
                    "table_name": tabla,
                    "hospital": hospital,
                    "asegurado": $('#txtNombre').val(),
                    "pregunta1": pregunta1,
                    "pregunta2": pregunta2,
                    "comentarios": $('#txtComentario').val()
                },
            ).done(function () {
                setTimeout(
                    function () {
                        // toastr.success('Formulario enviado con exito', 'Excelente!');
                    }, 200);
            }).fail(function () {
                setTimeout(
                    function () {
                        //   toastr.error('No se a podido enviar el formulario', 'Error!');
                    }, 200);
            })
        });
    </script>
</body>

</html>