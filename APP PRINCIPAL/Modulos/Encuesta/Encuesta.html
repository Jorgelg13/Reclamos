<!DOCTYPE html>
<html lang="en">
    <head>
		<meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
        <title>Encuesta Colectivos</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <meta name="description" content="Fullscreen Slit Slider with CSS3 and jQuery" />
        <meta name="keywords" content="slit slider, plugin, css3, transitions, jquery, fullscreen, autoplay" />
        <meta name="author" content="Codrops" />
        <link rel="shortcut icon" href="../favicon.ico"> 
		<link rel="stylesheet" type="text/css" href="css/demo.css" />
        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <link rel="stylesheet" type="text/css" href="css/custom.css" />
		<script type="text/javascript" src="js/modernizr.custom.79639.js"></script>
		<noscript>
			<link rel="stylesheet" type="text/css" href="css/styleNoJS.css" />
		</noscript>
    </head>
    <body>
        <div class="container demo-1">
            <div id="slider" class="sl-slider-wrapper">
				<div class="sl-slider">
					<div class="sl-slide bg-1" data-orientation="horizontal" data-slice1-rotation="-25" data-slice2-rotation="-25" data-slice1-scale="2" data-slice2-scale="2">
						<div class="sl-slide-inner">
							<h2>En una calificación de 1 a 10 ¿con base en su experiencia con Unity Promotores, usted recomendaría a un familiar o amigo el servicio de Unity Promotores?</h2>
							<blockquote><p>Lideres a nivel Centro Americano en corredores de seguros</p><cite>Unity Promotores</cite></blockquote>
							<div class="ec-stars-wrapper centrar-estrellas" >
								<a href="#" class="preguntaUno" data-value="1" title="Votar con 1 estrellas">&#9733;</a>
								<a href="#" class="preguntaUno" data-value="2" title="Votar con 2 estrellas">&#9733;</a>
								<a href="#" class="preguntaUno" data-value="3" title="Votar con 3 estrellas">&#9733;</a>
								<a href="#" class="preguntaUno" data-value="4" title="Votar con 4 estrellas">&#9733;</a>
								<a href="#" class="preguntaUno" data-value="5" title="Votar con 5 estrellas">&#9733;</a>
                                <a href="#" class="preguntaUno" data-value="6" title="Votar con 6 estrellas">&#9733;</a>
                                <a href="#" class="preguntaUno" data-value="7" title="Votar con 7 estrellas">&#9733;</a>
                                <a href="#" class="preguntaUno" data-value="8" title="Votar con 8 estrellas">&#9733;</a>
                                <a href="#" class="preguntaUno" data-value="9" title="Votar con 9 estrellas">&#9733;</a>
                                <a href="#" class="preguntaUno" data-value="10" title="Votar con 10 estrellas">&#9733;</a>
							</div>
						</div>
					</div>
					
                    <div class="sl-slide bg-2" data-orientation="horizontal" data-slice1-rotation="-25" data-slice2-rotation="-25" data-slice1-scale="2" data-slice2-scale="2">
                        <div class="sl-slide-inner">
                            <h2>En su experiencia, por favor calificar MI servicio, de 1 a 10, en donde 10 es excelente.</h2>
                            <blockquote><p>Lideres a nivel Centro Americano en corredores de seguros</p><cite>Unity Promotores</cite></blockquote>
                            <div class="ec-stars-wrapper centrar-estrellas">
                                <a href="#" class="preguntaDos" data-value="1" title="Votar con 1 estrellas">&#9733;</a>
                                <a href="#" class="preguntaDos" data-value="2" title="Votar con 2 estrellas">&#9733;</a>
                                <a href="#" class="preguntaDos" data-value="3" title="Votar con 3 estrellas">&#9733;</a>
                                <a href="#" class="preguntaDos" data-value="4" title="Votar con 4 estrellas">&#9733;</a>
                                <a href="#" class="preguntaDos" data-value="5" title="Votar con 5 estrellas">&#9733;</a>
                                <a href="#" class="preguntaDos" data-value="6" title="Votar con 6 estrellas">&#9733;</a>
                                <a href="#" class="preguntaDos" data-value="7" title="Votar con 7 estrellas">&#9733;</a>
                                <a href="#" class="preguntaDos" data-value="8" title="Votar con 8 estrellas">&#9733;</a>
                                <a href="#" class="preguntaDos" data-value="9" title="Votar con 9 estrellas">&#9733;</a>
                                <a href="#" class="preguntaDos" data-value="10" title="Votar con 10 estrellas">&#9733;</a>
                            </div>
                        </div>
                    </div>

					<div class="sl-slide bg-3" data-orientation="horizontal" data-slice1-rotation="3" data-slice2-rotation="3" data-slice1-scale="2" data-slice2-scale="1">
						<div class="sl-slide-inner">
							<h2>En su experiencia, por favor calificar EL SERVICIO DE LA ASEGURADORA, de 1 a 10, en donde 10 es excelente.</h2>
							<blockquote><p>Lideres a nivel Centro Americano en corredores de seguros</p><cite>Unity Promotores</cite></blockquote>
                            <div class="ec-stars-wrapper centrar-estrellas">
                                <a href="#" class="preguntaTres" data-value="1" title="Votar con 1 estrellas">&#9733;</a>
                                <a href="#" class="preguntaTres" data-value="2" title="Votar con 2 estrellas">&#9733;</a>
                                <a href="#" class="preguntaTres" data-value="3" title="Votar con 3 estrellas">&#9733;</a>
                                <a href="#" class="preguntaTres" data-value="4" title="Votar con 4 estrellas">&#9733;</a>
                                <a href="#" class="preguntaTres" data-value="5" title="Votar con 5 estrellas">&#9733;</a>
                                <a href="#" class="preguntaTres" data-value="6" title="Votar con 6 estrellas">&#9733;</a>
                                <a href="#" class="preguntaTres" data-value="7" title="Votar con 7 estrellas">&#9733;</a>
                                <a href="#" class="preguntaTres" data-value="8" title="Votar con 8 estrellas">&#9733;</a>
                                <a href="#" class="preguntaTres" data-value="9" title="Votar con 9 estrellas">&#9733;</a>
                                <a href="#" class="preguntaTres" data-value="10" title="Votar con 10 estrellas">&#9733;</a>
                            </div>
						</div>
					</div>
					
					<div class="sl-slide bg-4" data-orientation="vertical" data-slice1-rotation="-5" data-slice2-rotation="25" data-slice1-scale="2" data-slice2-scale="1">
						<div class="sl-slide-inner">
							<h2 class="alto">Si desea dejenos sus comentarios..</h2>
                            <textarea id="txtComentario" class="centrar-text" name="textarea" rows="5" cols="20" placeholder="Dejenos sus comentarios"></textarea>
							<blockquote><p>Lideres a nivel Centro Americano en corredores de seguros</p><cite>Unity Promotores</cite></blockquote>
                            <button type="submit" class="centrar-boton envio" id="enviar">Enviar</button>
						</div>
					</div>

                    <div class="sl-slide bg-5" data-orientation="vertical" data-slice1-rotation="10" data-slice2-rotation="-15" data-slice1-scale="1.5" data-slice2-scale="1.5">
                        <div class="sl-slide-inner">
                            <h2>Gracias por responder a la encuesta</h2>
                            <blockquote><p>Lideres a nivel Centro Americano en corredores de seguros</p><cite>Unity Promotores</cite></blockquote>
                            <button type="submit" class="centrar-boton nueva-encuesta">Nueva</button>
                        </div>
                    </div>
				</div>

				<!--<nav id="nav-arrows" class="nav-arrows">
					<span class="nav-arrow-prev">Previous</span>
					<span class="nav-arrow-next">Next</span>
				</nav>-->

				<nav id="nav-dots" class="nav-dots">
					<span class="nav-dot-current"></span>
					<span></span>
                    <span></span>
					<span></span>
				</nav>

			</div><!-- /slider-wrapper -->
        </div>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
		<script type="text/javascript" src="js/jquery.ba-cond.min.js"></script>
		<script type="text/javascript" src="js/jquery.slitslider.js"></script>
        <script src="../../Scripts/toastr.min.js"></script>
		<script type="text/javascript">
            (function ($) {
                $.get = function (key) {
                    key = key.replace(/[\[]/, '\\[');
                    key = key.replace(/[\]]/, '\\]');
                    var pattern = "[\\?&]" + key + "=([^&#]*)";
                    var regex = new RegExp(pattern);
                    var url = unescape(window.location.href);
                    var results = regex.exec(url);
                    if (results === null) {
                        return null;
                    } else {
                        return results[1];
                    }
                }
            })(jQuery); 

            var pregunta1 = 0;
            var pregunta2 = 0;
            var pregunta3 = 0;
            var valor = $.get("id");

            $(function () {
				var Page = (function() {
					var $navArrows = $( '#nav-arrows' ),
						$nav = $( '#nav-dots > span' ),
						slitslider = $( '#slider' ).slitslider( {
							onBeforeChange : function( slide, pos ) {
								$nav.removeClass( 'nav-dot-current' );
								$nav.eq( pos ).addClass( 'nav-dot-current' );
							}
						} ),

						init = function() {
							initEvents();
						},
						initEvents = function() {
							$navArrows.children( ':last' ).on( 'click', function() {
								slitslider.next();
								return false;
							} );

							$navArrows.children( ':first' ).on( 'click', function() {
								slitslider.previous();
								return false;
                            });

                            //funciones para cambiar al alegir una marcacion de estrellas

                            $('.preguntaUno').on('click', function (event) {
                                pregunta1 = $(this).attr('data-value');
                                var $dot = $(this);
                                if (!slitslider.isActive()) {

                                    $nav.removeClass('nav-dot-current');
                                    $dot.addClass('nav-dot-current');

                                }
                                slitslider.jump(2);
                                return false;
                            });

                            $('.preguntaDos').on('click', function (event) {
                                pregunta2 = $(this).attr('data-value');
                                var $dot = $(this);
                                if (!slitslider.isActive()) {

                                    $nav.removeClass('nav-dot-current');
                                    $dot.addClass('nav-dot-current');

                                }
                                slitslider.jump(3);
                                return false;
                            });

                            $('.preguntaTres').on('click', function (event) {
                                pregunta3 = $(this).attr('data-value');
                                var $dot = $(this);
                                if (!slitslider.isActive()) {

                                    $nav.removeClass('nav-dot-current');
                                    $dot.addClass('nav-dot-current');

                                }
                                slitslider.jump(4);
                                return false;
                            });

                            $('.envio').on('click', function (event) {
                                var $dot = $(this);
                                if (!slitslider.isActive()) {

                                    $nav.removeClass('nav-dot-current');
                                    $dot.addClass('nav-dot-current');

                                }
                                slitslider.jump(5);
                                return false;
                            });

                            $('.nueva-encuesta').on('click', function (event) {
                                window.location.reload();
                            });
                            //----------------------------------

							$nav.each( function( i ) {
							
								$( this ).on( 'click', function( event ) {
									var $dot = $( this );
									if( !slitslider.isActive() ) {

										$nav.removeClass( 'nav-dot-current' );
										$dot.addClass( 'nav-dot-current' );
									
									}
									slitslider.jump( i + 1 );
									return false;
								} );
							} );
						};
						return { init : init };
				})();
				Page.init();
            });


            $("#enviar").click(function () {
                $.post("http://192.168.81.225:9595/api/v1/encuesta/guardar",
                    {
                        "empresa": valor,
                        "pregunta1": pregunta1,
                        "pregunta2": pregunta2,
                        "pregunta3": pregunta3,
                        "comentario": $('#txtComentario').val()
                    },
                ).done(function () {
                    setTimeout(
                        function () {
                            toastr.success('Formulario enviado con exito', 'Excelente!');
                        }, 200);
                })
                    .fail(function () {
                        setTimeout(
                            function () {
                                toastr.error('No se a podido enviar el formulario', 'Error!');
                            }, 200);
                    })
            });
          
		</script>
	</body>
</html>